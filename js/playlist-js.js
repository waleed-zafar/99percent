function getCookie(s){for(var t=s+"=",e=document.cookie.split(";"),i=0;i<e.length;i++){for(var l=e[i];" "===l.charAt(0);)l=l.substring(1);if(0===l.indexOf(t))return l.substring(t.length,l.length)}return""}function setCookie(s,t,e){var i=new Date;i.setTime(i.getTime()+24*e*60*60*1e3);var l="expires="+i.toUTCString();document.cookie=s+"="+t+"; "+l+"; path=/;"}function update_play_count(){playlistCount=jQuery(".jp-playlist li").length,jQuery(".playlist-count").text("("+playlistCount+")")}function toggle_pause(s){jQuery("a.play[data-episode="+s+"]").show(),jQuery("a.pause[data-episode="+s+"]").hide(),jQuery("a.play:not([data-episode="+s+"])").show(),jQuery("a.pause:not([data-episode="+s+"])").hide()}function pi_set_playlist_cookie(){var s=[];jQuery(".jp-playlist li").each(function(){var t=jQuery(this).data("episode"),e=jQuery(this).data("title"),i=jQuery(this).data("episode-number"),l=jQuery(this).data("thumb"),a={episode:t,title:e,mp3:"/episode/"+t+"/play",number:i,thumb:l};s.push(a)}),s=s.length?JSON.stringify(s):"",setCookie("playlist",s,90)}!function(s,t){Playlist=function(t,e,i){var l=this;this.current=0,this.loop=!1,this.shuffled=!1,this.removing=!1,this.cssSelector=s.extend({},this._cssSelector,t),this.options=s.extend(!0,{keyBindings:{next:{key:221,fn:function(){l.next()}},previous:{key:219,fn:function(){l.previous()}},shuffle:{key:83,fn:function(){l.shuffle()}}},stateClass:{shuffled:"jp-state-shuffled"}},this._options,i),this.playlist=[],this.original=[],this._initPlaylist(e),this.cssSelector.details=this.cssSelector.cssSelectorAncestor+" .jp-details",this.cssSelector.playlist=this.cssSelector.cssSelectorAncestor+" .jp-playlist",this.cssSelector.next=this.cssSelector.cssSelectorAncestor+" .jp-next",this.cssSelector.previous=this.cssSelector.cssSelectorAncestor+" .jp-previous",this.cssSelector.shuffle=this.cssSelector.cssSelectorAncestor+" .jp-shuffle",this.cssSelector.shuffleOff=this.cssSelector.cssSelectorAncestor+" .jp-shuffle-off",this.options.cssSelectorAncestor=this.cssSelector.cssSelectorAncestor,this.options.repeat=function(s){l.loop=s.jPlayer.options.loop},s(this.cssSelector.jPlayer).bind(s.jPlayer.event.ready,function(){l._init()}),s(this.cssSelector.jPlayer).bind(s.jPlayer.event.ended,function(){l.next()}),s(this.cssSelector.jPlayer).bind(s.jPlayer.event.play,function(){s(this).jPlayer("pauseOthers")}),s(this.cssSelector.jPlayer).bind(s.jPlayer.event.resize,function(t){t.jPlayer.options.fullScreen?s(l.cssSelector.details).show():s(l.cssSelector.details).hide()}),s(this.cssSelector.previous).click(function(s){s.preventDefault(),l.previous(),l.blur(this)}),s(this.cssSelector.next).click(function(s){s.preventDefault(),l.next(),l.blur(this)}),s(this.cssSelector.skipBack).click(function(t){t.preventDefault();var e=s("#player").data("jPlayer").status.currentTime;s("#player").jPlayer("play",e-15)}),s(this.cssSelector.skipAhead).click(function(t){t.preventDefault();var e=s("#player").data("jPlayer").status.currentTime;s("#player").jPlayer("play",e+15)}),s(this.cssSelector.shuffle).click(function(t){t.preventDefault(),l.shuffled&&s(l.cssSelector.jPlayer).jPlayer("option","useStateClassSkin")?l.shuffle(!1):l.shuffle(!0),l.blur(this)}),s(this.cssSelector.shuffleOff).click(function(s){s.preventDefault(),l.shuffle(!1),l.blur(this)}).hide(),this.options.fullScreen||s(this.cssSelector.details).hide(),s(this.cssSelector.playlist+" ul").empty(),this._createItemHandlers(),s(this.cssSelector.jPlayer).jPlayer(this.options)},Playlist.prototype={_cssSelector:{jPlayer:"#jquery_jplayer_1",cssSelectorAncestor:"#jp_container_1"},_options:{playlistOptions:{autoPlay:!1,loopOnPrevious:!1,shuffleOnLoop:!0,enableRemoveControls:!1,displayTime:"slow",addTime:"fast",removeTime:"fast",shuffleTime:"slow",itemClass:"jp-playlist-item",freeGroupClass:"jp-free-media",freeItemClass:"jp-playlist-item-free",removeItemClass:"jp-playlist-item-remove"}},option:function(s,e){if(e===t)return this.options.playlistOptions[s];switch(this.options.playlistOptions[s]=e,s){case"enableRemoveControls":this._updateControls();break;case"itemClass":case"freeGroupClass":case"freeItemClass":case"removeItemClass":this._refresh(!0),this._createItemHandlers()}return this},_init:function(){var s=this;this._refresh(function(){s.options.playlistOptions.autoPlay?s.play(s.current):s.select(s.current)})},_initPlaylist:function(t){this.current=0,this.shuffled=!1,this.removing=!1,this.original=s.extend(!0,[],t),this._originalPlaylist()},_originalPlaylist:function(){var t=this;this.playlist=[],s.each(this.original,function(s){t.playlist[s]=t.original[s]})},_refresh:function(t){var e=this;if(t&&!s.isFunction(t))s(this.cssSelector.playlist+" ul").empty(),s.each(this.playlist,function(t){s(e.cssSelector.playlist+" ul").append(e._createListItem(e.playlist[t]))}),this._updateControls();else{var i=s(this.cssSelector.playlist+" ul").children().length?this.options.playlistOptions.displayTime:0;s(this.cssSelector.playlist+" ul").slideUp(i,function(){var i=s(this);s(this).empty(),s.each(e.playlist,function(s){i.append(e._createListItem(e.playlist[s]))}),e._updateControls(),s.isFunction(t)&&t(),e.playlist.length?s(this).slideDown(e.options.playlistOptions.displayTime):s(this).show()})}},_createListItem:function(t){var e=this,i="<li data-episode='"+t.episode+"' data-title='"+t.title+"' data-thumb='"+t.thumb+"' data-episode-number='"+t.number+"'><div>";if(t.free){var l=!0;i+="<span class='"+this.options.playlistOptions.freeGroupClass+"'>(",s.each(t,function(t,a){s.jPlayer.prototype.format[t]&&(l?l=!1:i+=" | ",i+="<a class='"+e.options.playlistOptions.freeItemClass+"' href='"+a+"' tabindex='-1'>"+t+"</a>")}),i+=")</span>"}return i+="<a href='#play' data-episode='"+t.episode+"' class='play "+this.options.playlistOptions.itemClass+"' tabindex='0'><span class='image'><img src='"+t.thumb+"' alt='"+t.episode+"'><span class='play-button'><i class='fa fa-play'></i></span></span></a><a href='#pause' data-episode='"+t.episode+"' class='pause' tabindex='0'><span class='image'><img src='"+t.thumb+"' alt='"+t.episode+"'><span class='pause-button'><i class='fa fa-pause'></i></span></span></a><a class='text' href='/episode/"+t.episode+"'><span class='episode-number'>Episode "+t.number+"</span><span class='episode-title'>"+t.title+"</span></span></a>",i+="<span class='hidden-mobile reorder-anchor'><svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:a='http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/' x='0px' y='0px' width='11.1px' height='23.1px' viewBox='0 0 11.1 23.1' style='enable-background:new 0 0 11.1 23.1;' xml:space='preserve'><polygon fill='#231F20' class='st0' points='6.3,20.2 6.3,2.9 10,6.6 11.1,5.5 5.5,0 0,5.5 1.1,6.6 4.8,2.9 4.8,20.2 1.1,16.5 0,17.5 5.5,23.1 11.1,17.5 10,16.5 '/></svg></span><a href='#remove' class='"+this.options.playlistOptions.removeItemClass+"' data-episode='"+t.episode+"''><svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' width='17.7' height='17.7' viewBox='0 0 17.7 17.7' xml:space='preserve'><circle class='circle-fill' fill='transparent' cx='8.8' cy='8.8' r='8.1'/><path fill='#231F20' d='M8.8 17.7c-2.3 0-4.5-.9-6.2-2.6C-.8 11.7-.8 6 2.6 2.6 6-.8 11.7-.8 15.1 2.6c3.4 3.4 3.4 9.1 0 12.5-1.7 1.7-4 2.6-6.3 2.6zm0-16.2c-1.8 0-3.7.7-5.2 2.1C2.3 5 1.5 6.9 1.5 8.8c0 2 .8 3.8 2.1 5.2s3.2 2.1 5.2 2.1 3.8-.8 5.2-2.1c2.9-2.9 2.9-7.5 0-10.4-1.4-1.4-3.3-2.1-5.2-2.1z'/><path fill='#231F20' d='M4.6 8.1h8.5v1.5H4.6z'/></svg><span class='sr'>Remove</span></a>",i+="</div></li>"},_createItemHandlers:function(){var t=this;s(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.itemClass).on("click","a."+this.options.playlistOptions.itemClass,function(e){e.preventDefault();var i=s(this).parent().parent().index();t.current!==i?t.play(i):s(t.cssSelector.jPlayer).jPlayer("play"),t.blur(this)}),s(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.freeItemClass).on("click","a."+this.options.playlistOptions.freeItemClass,function(e){e.preventDefault(),s(this).parent().parent().find("."+t.options.playlistOptions.itemClass).click(),t.blur(this)}),s(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.removeItemClass).on("click","a."+this.options.playlistOptions.removeItemClass,function(e){e.preventDefault();var i=s(this).parent().parent().index(),l=s(this).data("episode");t.remove(i),t.blur(this),pi_set_playlist_cookie(),update_play_count(),toggle_pause(l);var a=jQuery(".jp-playlist li").length;a<1&&s(".jp-progress .jp-title").text("")})},_updateControls:function(){this.options.playlistOptions.enableRemoveControls?s(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).show():s(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).hide(),this.shuffled?s(this.cssSelector.jPlayer).jPlayer("addStateClass","shuffled"):s(this.cssSelector.jPlayer).jPlayer("removeStateClass","shuffled"),s(this.cssSelector.shuffle).length&&s(this.cssSelector.shuffleOff).length&&(this.shuffled?(s(this.cssSelector.shuffleOff).show(),s(this.cssSelector.shuffle).hide()):(s(this.cssSelector.shuffleOff).hide(),s(this.cssSelector.shuffle).show()))},_highlight:function(e){this.playlist.length&&e!==t&&(s(this.cssSelector.playlist+" .jp-playlist-current").removeClass("jp-playlist-current"),s(this.cssSelector.playlist+" li:nth-child("+(e+1)+")").addClass("jp-playlist-current").find(".jp-playlist-item").addClass("jp-playlist-current"))},setPlaylist:function(s){this._initPlaylist(s),this._init()},add:function(t,e){s(this.cssSelector.playlist+" ul").append(this._createListItem(t)).find("li:last-child").hide().slideDown(this.options.playlistOptions.addTime),this._updateControls(),this.original.push(t),this.playlist.push(t),ga("send","event","Playlist","add",t.title),e?this.play(this.playlist.length-1):1===this.original.length&&this.select(0)},remove:function(e){var i=this;return e===t?(this._initPlaylist([]),this._refresh(function(){s(i.cssSelector.jPlayer).jPlayer("clearMedia")}),!0):!this.removing&&(e=e<0?i.original.length+e:e,0<=e&&e<this.playlist.length&&(this.removing=!0,s(this.cssSelector.playlist+" li:nth-child("+(e+1)+")").slideUp(this.options.playlistOptions.removeTime,function(){ga("send","event","Playlist","remove",s(this).data("title"));var t=s(this).data("episode");if(s("a.queue[data-episode="+t+"]").show(),s("a.remove[data-episode="+t+"]").hide(),s(this).remove(),i.shuffled){var l=i.playlist[e];s.each(i.original,function(s){if(i.original[s]===l)return i.original.splice(s,1),!1}),i.playlist.splice(e,1)}else i.original.splice(e,1),i.playlist.splice(e,1);i.original.length?e===i.current?(i.current=e<i.original.length?i.current:i.original.length-1,i.select(i.current)):e<i.current&&i.current--:(s(i.cssSelector.jPlayer).jPlayer("clearMedia"),i.current=0,i.shuffled=!1,i._updateControls()),i.removing=!1})),!0)},select:function(t){t=t<0?this.original.length+t:t,0<=t&&t<this.playlist.length?(this.current=t,this._highlight(t),s(this.cssSelector.jPlayer).jPlayer("setMedia",this.playlist[this.current])):this.current=0},play:function(e){e=e<0?this.original.length+e:e,0<=e&&e<this.playlist.length?this.playlist.length&&(this.select(e),s(this.cssSelector.jPlayer).jPlayer("play")):e===t&&s(this.cssSelector.jPlayer).jPlayer("play")},pause:function(){s(this.cssSelector.jPlayer).jPlayer("pause")},next:function(){var s=this.current+1<this.playlist.length?this.current+1:0;this.loop?0===s&&this.shuffled&&this.options.playlistOptions.shuffleOnLoop&&this.playlist.length>1?this.shuffle(!0,!0):this.play(s):s>0&&this.play(s),ga("send","event","Playlist","next",this.playlist[s].title)},previous:function(){var s=this.current-1>=0?this.current-1:this.playlist.length-1;(this.loop&&this.options.playlistOptions.loopOnPrevious||s<this.playlist.length-1)&&this.play(s),ga("send","event","Playlist","previous",this.playlist[s].title)},shuffle:function(e,i){var l=this;e===t&&(e=!this.shuffled),(e||e!==this.shuffled)&&s(this.cssSelector.playlist+" ul").slideUp(this.options.playlistOptions.shuffleTime,function(){l.shuffled=e,e?l.playlist.sort(function(){return.5-Math.random()}):l._originalPlaylist(),l._refresh(!0),i||!s(l.cssSelector.jPlayer).data("jPlayer").status.paused?l.play(0):l.select(0),s(this).slideDown(l.options.playlistOptions.shuffleTime)})},blur:function(t){s(this.cssSelector.jPlayer).jPlayer("option","autoBlur")&&s(t).blur()}}}(jQuery);